{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/%28dashboard%29/epp/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { EPP } from '../../../types'\n\nexport default function EPPPage() {\n  const [epp, setEpp] = useState<EPP[]>([])\n  const [formData, setFormData] = useState({\n    codigo: '',\n    descripcion: '',\n    talla: '',\n    cantidadIngreso: '',\n    precioUnitario: ''\n  })\n\n  useEffect(() => {\n    loadEpp()\n  }, [])\n\n  const loadEpp = async () => {\n    try {\n      const response = await fetch('/api/epp')\n      const result = await response.json()\n      \n      // Handle both direct array and wrapped response formats\n      const data = result.data || result\n      setEpp(Array.isArray(data) ? data : [])\n    } catch (error) {\n      console.error('Error loading EPP:', error)\n      setEpp([]) // Fallback to empty array\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      await fetch('/api/epp', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData)\n      })\n      setFormData({ codigo: '', descripcion: '', talla: '', cantidadIngreso: '', precioUnitario: '' })\n      loadEpp()\n    } catch (error) {\n      console.error('Error creating EPP:', error)\n    }\n  }\n\n  const handleDelete = async (id: number) => {\n    try {\n      await fetch(`/api/epp?id=${id}`, { method: 'DELETE' })\n      loadEpp()\n    } catch (error) {\n      console.error('Error deleting EPP:', error)\n    }\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n      <div className=\"bg-white shadow-md rounded-lg p-6\">\n        <h1 className=\"text-2xl font-bold mb-6\">Gestión de EPP</h1>\n        \n        <form onSubmit={handleSubmit} className=\"mb-6 space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <input\n              type=\"text\"\n              placeholder=\"Código\"\n              value={formData.codigo}\n              onChange={(e) => setFormData({...formData, codigo: e.target.value})}\n              className=\"border rounded px-3 py-2\"\n              required\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Descripción\"\n              value={formData.descripcion}\n              onChange={(e) => setFormData({...formData, descripcion: e.target.value})}\n              className=\"border rounded px-3 py-2\"\n              required\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Talla\"\n              value={formData.talla}\n              onChange={(e) => setFormData({...formData, talla: e.target.value})}\n              className=\"border rounded px-3 py-2\"\n            />\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"Cantidad de ingreso\"\n                value={formData.cantidadIngreso}\n                onChange={(e) => setFormData({...formData, cantidadIngreso: e.target.value})}\n                className=\"border rounded px-3 py-2 w-full\"\n                required\n              />\n              <small className=\"text-gray-500 text-xs mt-1 block\">\n                * El stock actual se inicializa con este valor\n              </small>\n            </div>\n            <input\n              type=\"number\"\n              placeholder=\"Precio unitario\"\n              value={formData.precioUnitario}\n              onChange={(e) => setFormData({...formData, precioUnitario: e.target.value})}\n              className=\"border rounded px-3 py-2\"\n            />\n          </div>\n          <button type=\"submit\" className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\">\n            Agregar EPP\n          </button>\n        </form>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Código</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Descripción</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Talla</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Stock</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {Array.isArray(epp) && epp.length > 0 ? (\n                epp.map((item) => (\n                  <tr key={item.id}>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">{item.codigo}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">{item.descripcion}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">{item.talla || '-'}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">{item.cantidadActual} / {item.cantidadIngreso}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <button\n                        onClick={() => handleDelete(item.id)}\n                        className=\"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600\"\n                      >\n                        Eliminar\n                      </button>\n                    </td>\n                  </tr>\n                ))\n              ) : (\n                <tr>\n                  <td colSpan={5} className=\"px-6 py-4 text-center text-gray-500\">\n                    No hay EPP registrados\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}